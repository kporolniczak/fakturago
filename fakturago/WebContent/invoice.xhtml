<ui:composition xmlns="http://www.w3.org/1999/xhtml"
 template="template.xhtml"
 xmlns:h="http://java.sun.com/jsf/html"
 xmlns:f="http://java.sun.com/jsf/core"
 xmlns:ui="http://java.sun.com/jsf/facelets"
 xmlns:p="http://primefaces.org/ui">
 <ui:define name="FakturaGO">
 </ui:define>

<ui:define name="content">
<h:form id="form">  
<p:growl id="messages" showDetail="true"/> 
 <p:panel header="Prepare invoice">
 
 <h:outputText value="Faktura nr: "/>
 <p:inputText value="#{invoiceBean.invoice.number}"/>
 <br/>
 <p:outputPanel id="service">  
 <p:dataTable id="lines" var="line" value="#{invoiceBean.lines}">  
        	<p:column>  
                <f:facet name="header">  
                    <h:outputText value="Name" />  
                </f:facet>  
                <h:outputText value="#{line.name}" />  
            </p:column>    
         <p:column>  
                <f:facet name="header">  
                    <h:outputText value="PKWiU" />  
                </f:facet>  
                <h:outputText value="#{line.pkwiu}" />  
            </p:column> 
         <p:column>  
                <f:facet name="header">  
                    <h:outputText value="Ilość" />  
                </f:facet>  
                <h:outputText value="#{line.quantity}" />  
            </p:column> 
         <p:column>  
                <f:facet name="header">  
                    <h:outputText value="Jednostka" />  
                </f:facet>  
                <h:outputText value="#{line.unit}" />  
            </p:column>
         <p:column>  
                <f:facet name="header">  
                    <h:outputText value="Cena netto" />  
                </f:facet>  
                <h:outputText value="#{line.nettoPrice}" />  
            </p:column>
         <p:column>  
                <f:facet name="header">  
                    <h:outputText value="Rabat" />  
                </f:facet>  
                <h:outputText value="#{line.discount}" />  
            </p:column>
         <p:column>  
                <f:facet name="header">  
                    <h:outputText value="Stawka VAT" />  
                </f:facet>  
                <h:outputText value="#{line.vatrate}" />  
            </p:column>
         <p:column> 
                <f:facet name="header">  
                    <h:outputText value="Wartość netto" />  
                </f:facet>  
                <h:outputText value="#{line.nettoValue}" />  
            </p:column> 
         <p:column> 
                <f:facet name="header">  
                    <h:outputText value="Wartość vat" />  
                </f:facet>  
                <h:outputText value="#{line.vatValue}" />  
            </p:column>
            <p:column> 
                <f:facet name="header">  
                    <h:outputText value="Wartość brutto" />  
                </f:facet>  
                <h:outputText value="#{line.bruttoValue}" />  
            </p:column>
         <p:column> 
                <f:facet name="header">  
                    <h:outputText value="Operation" />  
                </f:facet>  
                <p:commandLink value="remove" update=":form:lines" process=":form:lines">  
                 
                    <p:collector value="#{line}"  
                                 removeFrom="#{invoiceBean.lines}" />  
                </p:commandLink>  
            </p:column>  
</p:dataTable>
<p:commandButton value="Another line" id="selectButton" update=":form:display" oncomplete="lineDialog.show()" icon="ui-icon-newwin" title="View">  
                <f:setPropertyActionListener value="#{none}" target="#{invoiceBean.line}" />  
            </p:commandButton> 
</p:outputPanel>
 <h4>Data wystawienia</h4>  
 <p:calendar value="#{invoiceBean.invoice.dateOfDraft}" id="dcalandar" pattern="dd/MM/yyyy"/>
 <h4>Data sprzedaży</h4>  
 <p:calendar value="#{invoiceBean.invoice.dateOfSell}" id="scalandar" pattern="dd/MM/yyyy"/>
  <br/>
  <br/>
  <h:outputText value="Miejsce wystawienia" />  
 <p:inputText value="#{invoiceBean.invoice.placeOfSell}" />
 <br/>  
            <p:selectOneMenu id="formOfPayment" value="#{invoiceBean.invoice.formOfPayment}">  
                <f:selectItems value="#{invoiceBean.formsOfPayment}"/>   
            </p:selectOneMenu> 
            
 <p:fieldset id="invoiceSeller" legend="Seller">   
        <h:outputText value="#{invoiceBean.seller.name}" /> <br/>
        <h:outputText value="#{invoiceBean.seller.address}" /> <br/> 
        <h:outputText value="#{invoiceBean.seller.city}" />  <br/>
        <h:outputText value="#{invoiceBean.seller.zip}" />  <br/>
        <h:outputText value="#{invoiceBean.seller.nip}" />   
</p:fieldset> 
 </p:panel>
<p:carousel id="buyersCarousel" value="#{buyerBean.buyersList}" var="buyer" itemStyleClass="buyerItem" numVisible="1">     
   <h:panelGrid columns="1" style="width:100%" cellpadding="5" >            
        	<h:outputText value="#{msg.name}: #{buyer.name}" />  
    		<h:outputText value="#{msg.address}: #{buyer.address}" />  
            <h:outputText value="#{msg.city}: #{buyer.city}" />  
            <h:outputText value="#{msg.zip}: #{buyer.zip}" />  
            <h:outputText value="#{msg.nip}: #{buyer.nip}" />  
            <h:outputText value="#{msg.province}: #{buyer.province.name}" />  
            <h:outputText value="#{msg.pesel}: #{buyer.pesel}" />  
            <h:outputText value="#{msg.mail}: #{buyer.mail}" />  
    </h:panelGrid>  
</p:carousel> 
<p:dialog header="Add another line" widgetVar="lineDialog" resizable="false" id="lineDlg"  
                showEffect="fade" hideEffect="explode" modal="true">  
<h:panelGrid id="display" columns="2" cellpadding="5">
       	<h:outputText value="Name" />
        <p:inputText value="#{invoiceBean.line.name}"/>
  		<h:outputText value="PKWiU" />
        <p:inputText id="pkwiuInput" value="#{invoiceBean.line.pkwiu}"/>  
 		<h:outputText value="Ilość" />
        <p:inputText id="quantityInput" value="#{invoiceBean.line.quantity}"/>
  		<h:outputText value="Jednostka" /> 
        <p:inputText id="unitInput" value="#{invoiceBean.line.unit}"/>
  		<h:outputText value="Netto" />
		<p:inputText id="nettoPriceInput" value="#{invoiceBean.line.nettoPrice}"/> 
		<h:outputText value="Rabat" />  
        <p:inputText id="discountInput" value="#{invoiceBean.line.discount}"/> 
    	<h:outputText value="Stawka VAT" />
        <p:inputText id="vatInput" value="#{invoiceBean.line.vatrate}"/> 
        <p:commandButton id="btn_add" value="Add" update="lines @parent"  
                            action="#{invoiceBean.reinit}" >
        <p:collector value="#{invoiceBean.line}" addTo="#{invoiceBean.lines}" />
        </p:commandButton>
        </h:panelGrid>
  
    </p:dialog> 
 </h:form>
 </ui:define>
</ui:composition>  